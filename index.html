<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime Finder</title>
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"> -->
  <style>
    /* styles.css */
body {
font-family: Arial, sans-serif;
background: linear-gradient(100deg, #ffafcc, #ffc8dd, #bde0fe);
margin: 0;
padding: 0;
}

header {
margin-top: 40px;
margin-bottom: 20px;
color: white;
text-align: center;
padding: 20px 0;
}

h1 {
margin: 0;
font-size: 2em;
}

main {
padding: 20px;
max-width: 1200px;
margin: 0 auto;
}

.controls {
display: flex;
flex-wrap: wrap;
gap: 10px;
margin-bottom: 20px;
justify-content: center;
}

.controls input, .controls select, .controls button {
padding: 8px 12px;
font-size: 1em;
border-radius: 20px;
border: none;
}

button {
cursor: pointer;
background-color: rgb(123, 23, 123);
color: white;
border: none;
border-radius: 5px;
}

button:hover {
background-color: #0a5383;
}

.anime-container {
display: flex;
flex-direction: column;
gap: 20px;
}

.anime-card {
display: flex;              /* side by side */
background-color: white;
border-radius: 10px;
padding: 15px;
box-shadow: 0 4px 8px rgba(0,0,0,0.1);
transition: transform 0.2s;
gap: 20px;                  /* space between image and text */
}

.anime-card:hover {
transform: scale(1.05);
}

.anime-card img {
width: 200px;               /* fixed width for image */
height: auto;
border-radius: 10px;
flex-shrink: 0;             /* don't shrink the image */
}

.anime-info {
display: flex;
flex-direction: column;     /* stack text vertically */
justify-content: flex-start;
}

.anime-card h2 {
font-size: 1.2em;
margin: 0 0 10px 0;
}

.anime-card p {
margin: 5px 0;
font-size: 0.9em;
}

.synopsis {
font-style: italic;
color: #555;
}
  </style>
</head>
<body>
<header><h1>Anime Finder</h1></header>

<main>
<section class="controls">
  <input type="text" id="search-input" placeholder="Search anime...">
  <button onclick="searchAnime()">Search</button>
  <button onclick="getRandomAnime()">Random</button>
  <select id="genre-select">
    <option value="">Filter by genre</option>
    <option value="Action">Action</option>
    <option value="Adventure">Adventure</option> 
    <option value="Fantasy">Fantasy</option> 
    <option value="Mystery">Mystery</option> 
    <option value="Thriller">Thriller</option>
     <option value="Supernatural">Supernatural</option>
      <option value="Drama">Drama</option>
       <option value="Horror">Horror</option> 
       <option value="Romance">Romance</option> 
       <option value="Sci-Fi">Sci-Fi</option> 
    <option value="Comedy">Comedy</option>

  </select>
  <button onclick="filterByGenre()">Filter</button>
</section>

<section id="anime-container" class="anime-container"></section>
</main>

<script>
async function searchAnime() {
    const name = document.getElementById('search-input').value;
    const res = await fetch('/search', { method: 'POST', body: new URLSearchParams({name}) });
    const data = await res.json();
    displayAnime(data);
}

async function getRandomAnime() {
    const res = await fetch('/random');
    const data = await res.json();
    displayAnime(data);
}

async function filterByGenre() {
    const genre = document.getElementById('genre-select').value;
    const res = await fetch('/filter_genre', { method: 'POST', body: new URLSearchParams({genre}) });
    const data = await res.json();
    displayAnime(data);
}

function displayAnime(animes) {
    const container = document.getElementById('anime-container');
    container.innerHTML = '';
    if (!animes || animes.length === 0) {
        container.innerHTML = '<p>No anime found.</p>';
        return;
    }
    animes.forEach(anime => {
        const card = document.createElement('div');
        card.classList.add('anime-card');
        card.innerHTML = `
            <img src="/static/covers/${anime.img}" alt="${anime.name}">
            <div class="anime-info">
                <h2>${anime.name} (${anime.year})</h2>
                <p><strong>Score:</strong> ${anime.score}</p>
                <p><strong>Status:</strong> ${anime.status}</p>
                <p><strong>Number of episodes:</strong> ${anime.episodes}</p>
                <p><strong>Number of seasons:</strong> ${anime.seasons}</p>
                <p><strong>Genres:</strong> ${anime.genres.join(', ')}</p>
                <p class="synopsis">${anime.synopsis}</p>
            </div>
        `;
        container.appendChild(card);
    });
}


</script>
</body>
</html>

